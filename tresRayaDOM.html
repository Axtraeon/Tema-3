<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tres en Raya</title>
    <style>
        .tablero {
            font-family: monospace;
            font-size: 24px;
            white-space: pre;
        }
        .casilla {
            width: 50px;
            height: 50px;
            text-align: center;
            display: inline-block;
            border: 1px solid black;
            line-height: 50px;
        }
    </style>
</head>
<body>
    <h1>Tres en Raya</h1>
    <p>Tablero con coordenadas (1-9):</p>
    <div id="tableroDOM" class="tablero">
        <!-- Aquí se mostrará el tablero actual -->
    </div>
    
    <script>
        // Crear el tablero vacío (3x3)
        let tablero = [
            ["", "", ""],
            ["", "", ""],
            ["", "", ""]
        ];

        // Controlamos el jugador X o O
        let turno = "X";

        // Mostramos el tablero actual en el DOM
        function mostrarTablero() {
            let tableroDiv = document.getElementById("tableroDOM");
            tableroDiv.innerHTML = ""; // Limpiar el tablero anterior

            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    let casilla = document.createElement("div");
                    casilla.className = "casilla";
                    if (tablero[i][j] === "") { //Si lña casilla esta vacia, le asigna un espacio en blanco
                        casilla.textContent = " ";
                    } else {
                    casilla.textContent = tablero[i][j]; //Si la casilla contiene una X o una O le asigna ese valor como texto
                    }
                    tableroDiv.appendChild(casilla); //Inserta el div recién creado (la casilla) en el elemento tableroDiv, el metodo appendChild() añade un nuevo div al final del contenido del div que contiene todo el tablero
                }
                // Añadir un salto de línea después de cada fila
                tableroDiv.appendChild(document.createElement("br"));
            }
        }

        // Función que convierte la entrada del usuario (1-9) a coordenadas de array
        function obtenerCoordenadas(casilla) {
            switch (casilla) {
                case 1: return [0, 0];
                case 2: return [0, 1];
                case 3: return [0, 2];
                case 4: return [1, 0];
                case 5: return [1, 1];
                case 6: return [1, 2];
                case 7: return [2, 0];
                case 8: return [2, 1];
                case 9: return [2, 2];
                default: return null;
            }
        }

        // Función para verificar si un jugador ha ganado
        function hayGanador() {
            for (let i = 0; i < 3; i++) {
                if (tablero[i][0] === turno && tablero[i][1] === turno && tablero[i][2] === turno) {
                    return true;
                }

                if (tablero[0][i] === turno && tablero[1][i] === turno && tablero[2][i] === turno) {
                    return true;
                }
            }

            if (tablero[0][0] === turno && tablero[1][1] === turno && tablero[2][2] === turno) {
                return true;
            }

            if (tablero[0][2] === turno && tablero[1][1] === turno && tablero[2][0] === turno) {
                return true;
            }

            return false;
        }

        // Función para verificar si el tablero está lleno
        function tableroLleno() {
            for (let i = 0; i < tablero.length; i++) {
                for (let j = 0; j < tablero[i].length; j++) {
                    if (tablero[i][j] === "") {
                        return false;
                    }
                }
            }
            return true;
        }

        // Función principal que controla el flujo del juego
        function jugar() {
            let juegoTerminado = false;

            while (!juegoTerminado) {
                mostrarTablero();
                let casilla = parseInt(prompt(`Turno de ${turno}. Elige una casilla (1-9):`));
                let coordenadas = obtenerCoordenadas(casilla);

                if (coordenadas && tablero[coordenadas[0]][coordenadas[1]] === "") {
                    tablero[coordenadas[0]][coordenadas[1]] = turno;

                    if (hayGanador()) {
                        mostrarTablero();
                        alert(`¡Jugador ${turno} ha ganado!`);
                        juegoTerminado = true;
                    } else if (tableroLleno()) {
                        mostrarTablero();
                        alert("¡Es un empate!");
                        juegoTerminado = true;
                    } else {
                        // Cambiar el turno entre X o O (Si turno es igual a X significa que el siguiente turno es para O)
                        if (turno === "X")  {
                            turno = "O";
                        }else
                        turno = "X"
                    }
                } else {
                    alert("Casilla no válida o ya ocupada. Elige otra.");
                }
            }
        }

        // Iniciar el juego
        jugar();
    </script>
</body>
</html>